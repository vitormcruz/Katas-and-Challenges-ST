'From Pharo5.0 of 16 April 2015 [Latest update: #50761] on 23 October 2016 at 12:49:47.092625 pm'!Object subclass: #BusDriver	instanceVariableNames: 'gossipKnown currentBusStop routeReadStream'	classVariableNames: ''	poolDictionaries: ''	category: 'GossipBusDriverkata'!!BusDriver commentStamp: '<historical>' prior: 0!I am BusDriver and I really enjoy a gossip!!BusDriver methodsFor: 'listeners' stamp: 'vitor 10/20/2016 09:38'!listenGossip: aBusDriverGossip 	gossipKnown add: aBusDriverGossip.! !!BusDriver methodsFor: 'testing' stamp: 'vitor 10/21/2016 09:53'!gossipsKnow	^ gossipKnown clone.! !!BusDriver methodsFor: 'action' stamp: 'vitor 10/21/2016 09:56'!gossip	gossipKnown do: [:gossip | self gossipChannel announce: gossip].	! !!BusDriver methodsFor: 'action' stamp: 'vitormcruz 10/23/2016 12:16'!move	routeReadStream atEnd ifTrue: [ routeReadStream reset ].	self gossipChannel unsubscribe: self.	currentBusStop := routeReadStream next.   self gossipChannel weak when: BusDriverGossip send: #listenGossip: to: self.! !!BusDriver methodsFor: 'acessing' stamp: 'vitor 10/17/2016 09:14'!currentBusStop	^ currentBusStop.! !!BusDriver methodsFor: 'acessing' stamp: 'vitor 10/20/2016 09:06'!gossipChannel	^ currentBusStop.! !!BusDriver methodsFor: 'initialization' stamp: 'vitor 10/21/2016 10:02'!initialize	gossipKnown := Set new add: (BusDriverGossip of: self); yourself.	currentBusStop := -1 asBusStop.! !!BusDriver methodsFor: 'accessing' stamp: 'vitor 10/17/2016 09:22'!rout: aRout 	routeReadStream := aRout readStream.! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!BusDriver class	instanceVariableNames: ''!!BusDriver class methodsFor: 'instance creation' stamp: 'vitor 10/19/2016 08:47'!forRout: routs	routs ifEmpty: [ self error: 'Nowhere to go!!'].	^ super new rout: routs.! !